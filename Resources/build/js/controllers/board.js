angular.module("CtrlBoard",["ngSlider","CollectTiles","ModelSliders","ModelModals","angularLocalStorage"]).controller("CtrlBoard",function($scope,storage,CollectTiles,ModelSliders,ModelModals){var noMineFirstClick,save,savedGame;return noMineFirstClick=function(tile){return 0===$scope.tiles.numOfClears&&tile.model.isMine===!0&&(tile.model.isMine=!1,$scope.tiles.randomSafeTile().model.isMine=!0,$scope.tiles.tallyMines()),tile},save=function(){return $scope.tiles.update(),storage.set("tiles",$scope.tiles.all)},$scope.modals=ModelModals.set("Resources/templates/modals/",["instructions","newGame"]),$scope.sliders=ModelSliders.init(5,20,10),savedGame=storage.get("tiles"),$scope.tiles=savedGame?new CollectTiles(savedGame):new CollectTiles($scope.sliders.info.x.val,$scope.sliders.info.y.val,$scope.sliders.info.mines.val),save(),$scope.ui={newGame:function(sizeX,sizeY,numOfMines){return $scope.tiles=new CollectTiles(sizeX,sizeY,numOfMines),$scope.modals.reset()},tileClick:function(event,tile){var flagKeyWasPressed;return flagKeyWasPressed=event.shiftKey===!0||event.altKey===!0,flagKeyWasPressed?tile.toggleFlag():(noMineFirstClick(tile),tile.clear())}},$scope.$on("Tile:Clear",function($ev,tile){return save()}),$scope.$on("Tile:Flag",function($ev,tile){return save()}),window.logScope=function(){return window.$scope=$scope}});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbnRyb2xsZXJzL2JvYXJkLmNvZmZlZSIsImNvbnRyb2xsZXJzL2JvYXJkLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJjb250cm9sbGVyIiwiJHNjb3BlIiwic3RvcmFnZSIsIkNvbGxlY3RUaWxlcyIsIk1vZGVsU2xpZGVycyIsIk1vZGVsTW9kYWxzIiwibm9NaW5lRmlyc3RDbGljayIsInNhdmUiLCJzYXZlZEdhbWUiLCJ0aWxlIiwidGlsZXMiLCJudW1PZkNsZWFycyIsIm1vZGVsIiwiaXNNaW5lIiwicmFuZG9tU2FmZVRpbGUiLCJ0YWxseU1pbmVzIiwidXBkYXRlIiwic2V0IiwiYWxsIiwibW9kYWxzIiwic2xpZGVycyIsImluaXQiLCJnZXQiLCJpbmZvIiwieCIsInZhbCIsInkiLCJtaW5lcyIsInVpIiwibmV3R2FtZSIsInNpemVYIiwic2l6ZVkiLCJudW1PZk1pbmVzIiwicmVzZXQiLCJ0aWxlQ2xpY2siLCJldmVudCIsImZsYWdLZXlXYXNQcmVzc2VkIiwic2hpZnRLZXkiLCJhbHRLZXkiLCJ0b2dnbGVGbGFnIiwiY2xlYXIiLCIkb24iLCIkZXYiLCJ3aW5kb3ciLCJsb2dTY29wZSJdLCJtYXBwaW5ncyI6IkFBQUFBLFFBQ0NDLE9BQU8sYUFFSixXQUNBLGVBQ0EsZUFDQSxjQUNBLHdCQUVIQyxXQUFXLFlBQWEsU0FDckJDLE9BQ0FDLFFBQ0FDLGFBQ0FDLGFBQ0FDLGFBRUEsR0FBQUMsa0JBQUFDLEtBQUFDLFNDNkJGLE9EN0JFRixrQkFBbUIsU0FBQ0csTUFNaEIsTUFMK0IsS0FBNUJSLE9BQU9TLE1BQU1DLGFBQXFCRixLQUFLRyxNQUFNQyxVQUFVLElBQ3RESixLQUFLRyxNQUFNQyxRQUFTLEVBQ3BCWixPQUFPUyxNQUFNSSxpQkFBaUJGLE1BQU1DLFFBQVMsRUFDN0NaLE9BQU9TLE1BQU1LLGNBRVZOLE1BRVhGLEtBQU8sV0NaUCxNRGFJTixRQUFPUyxNQUFNTSxTQUNiZCxRQUFRZSxJQUFJLFFBQVNoQixPQUFPUyxNQUFNUSxNQUV0Q2pCLE9BQU9rQixPQUFTZCxZQUFZWSxJQUN4QiwrQkFFSSxlQUNBLFlBSVJoQixPQUFPbUIsUUFBVWhCLGFBQWFpQixLQUFLLEVBQUcsR0FBSSxJQUcxQ2IsVUFBWU4sUUFBUW9CLElBQUksU0FHcEJyQixPQUFPUyxNQURSRixVQUNvQixHQUFBTCxjQUFhSyxXQUViLEdBQUFMLGNBQ2ZGLE9BQU9tQixRQUFRRyxLQUFLQyxFQUFFQyxJQUN0QnhCLE9BQU9tQixRQUFRRyxLQUFLRyxFQUFFRCxJQUN0QnhCLE9BQU9tQixRQUFRRyxLQUFLSSxNQUFNRixLQUlsQ2xCLE9BRUFOLE9BQU8yQixJQUNIQyxRQUFTLFNBQUNDLE1BQU9DLE1BQU9DLFlDNUIxQixNRDZCTS9CLFFBQU9TLE1BQVksR0FBQVAsY0FBYTJCLE1BQU9DLE1BQU9DLFlBRTlDL0IsT0FBT2tCLE9BQU9jLFNBRWxCQyxVQUFXLFNBQUNDLE1BQU8xQixNQUNmLEdBQUEyQixrQkFLQSxPQUxBQSxtQkFDSUQsTUFBTUUsWUFBWSxHQUNsQkYsTUFBTUcsVUFBVSxFQUdqQkYsa0JBQ0MzQixLQUFLOEIsY0FFTGpDLGlCQUFpQkcsTUFDakJBLEtBQUsrQixXQUdqQnZDLE9BQU93QyxJQUFJLGFBQWMsU0FBQ0MsSUFBS2pDLE1DaEMvQixNRGlDSUYsVUFJSk4sT0FBT3dDLElBQUksWUFBYSxTQUFDQyxJQUFLakMsTUNsQzlCLE1EbUNJRixVQUdKb0MsT0FBT0MsU0FBVyxXQ25DbEIsTURvQ0lELFFBQU8xQyxPQUFTQSIsImZpbGUiOiJjb250cm9sbGVycy9ib2FyZC5qcyIsInNvdXJjZXNDb250ZW50IjpbImFuZ3VsYXJcbi5tb2R1bGUgJ0N0cmxCb2FyZCcsIFtcbiMgRGVwZW5kZW5jaWVzXG4gICAgJ25nU2xpZGVyJ1xuICAgICdDb2xsZWN0VGlsZXMnXG4gICAgJ01vZGVsU2xpZGVycydcbiAgICAnTW9kZWxNb2RhbHMnXG4gICAgJ2FuZ3VsYXJMb2NhbFN0b3JhZ2UnXG5dXG4uY29udHJvbGxlciAnQ3RybEJvYXJkJywgKFxuICAgICRzY29wZSxcbiAgICBzdG9yYWdlLFxuICAgIENvbGxlY3RUaWxlcyxcbiAgICBNb2RlbFNsaWRlcnMsXG4gICAgTW9kZWxNb2RhbHMsXG4pIC0+XG4gICAgbm9NaW5lRmlyc3RDbGljayA9ICh0aWxlKSAtPlxuICAgICAgICBpZiAkc2NvcGUudGlsZXMubnVtT2ZDbGVhcnMgaXMgMCBhbmQgdGlsZS5tb2RlbC5pc01pbmUgaXMgdHJ1ZVxuICAgICAgICAgICAgdGlsZS5tb2RlbC5pc01pbmUgPSBmYWxzZVxuICAgICAgICAgICAgJHNjb3BlLnRpbGVzLnJhbmRvbVNhZmVUaWxlKCkubW9kZWwuaXNNaW5lID0gdHJ1ZVxuICAgICAgICAgICAgJHNjb3BlLnRpbGVzLnRhbGx5TWluZXMoKVxuXG4gICAgICAgIHJldHVybiB0aWxlXG5cbiAgICBzYXZlID0gLT5cbiAgICAgICAgJHNjb3BlLnRpbGVzLnVwZGF0ZSgpXG4gICAgICAgIHN0b3JhZ2Uuc2V0ICd0aWxlcycsICRzY29wZS50aWxlcy5hbGxcblxuICAgICRzY29wZS5tb2RhbHMgPSBNb2RlbE1vZGFscy5zZXQoXG4gICAgICAgICdSZXNvdXJjZXMvdGVtcGxhdGVzL21vZGFscy8nLFxuICAgICAgICBbXG4gICAgICAgICAgICAnaW5zdHJ1Y3Rpb25zJyxcbiAgICAgICAgICAgICduZXdHYW1lJ1xuICAgICAgICBdXG4gICAgKVxuXG4gICAgJHNjb3BlLnNsaWRlcnMgPSBNb2RlbFNsaWRlcnMuaW5pdCA1LCAyMCwgMTBcblxuICAgICMgTG9hZCBvciBDcmVhdGUgZ2FtZVxuICAgIHNhdmVkR2FtZSA9IHN0b3JhZ2UuZ2V0ICd0aWxlcydcblxuICAgIGlmIHNhdmVkR2FtZVxuICAgICAgICAkc2NvcGUudGlsZXMgPSBuZXcgQ29sbGVjdFRpbGVzIHNhdmVkR2FtZVxuICAgIGVsc2VcbiAgICAgICAgJHNjb3BlLnRpbGVzID0gbmV3IENvbGxlY3RUaWxlcyhcbiAgICAgICAgICAgICRzY29wZS5zbGlkZXJzLmluZm8ueC52YWwsXG4gICAgICAgICAgICAkc2NvcGUuc2xpZGVycy5pbmZvLnkudmFsLFxuICAgICAgICAgICAgJHNjb3BlLnNsaWRlcnMuaW5mby5taW5lcy52YWxcbiAgICAgICAgKVxuXG5cbiAgICBzYXZlKClcblxuICAgICRzY29wZS51aSA9IHtcbiAgICAgICAgbmV3R2FtZTogKHNpemVYLCBzaXplWSwgbnVtT2ZNaW5lcykgLT5cbiAgICAgICAgICAgICRzY29wZS50aWxlcyA9IG5ldyBDb2xsZWN0VGlsZXMgc2l6ZVgsIHNpemVZLCBudW1PZk1pbmVzXG4gICAgICAgICAgICAjICRzY29wZS5pbmZvLnVwZGF0ZSAkc2NvcGUudGlsZXMuYWxsXG4gICAgICAgICAgICAkc2NvcGUubW9kYWxzLnJlc2V0KClcblxuICAgICAgICB0aWxlQ2xpY2s6IChldmVudCwgdGlsZSkgLT5cbiAgICAgICAgICAgIGZsYWdLZXlXYXNQcmVzc2VkID0gKFxuICAgICAgICAgICAgICAgIGV2ZW50LnNoaWZ0S2V5IGlzIHRydWUgb3JcbiAgICAgICAgICAgICAgICBldmVudC5hbHRLZXkgaXMgdHJ1ZVxuICAgICAgICAgICAgKVxuXG4gICAgICAgICAgICBpZiBmbGFnS2V5V2FzUHJlc3NlZFxuICAgICAgICAgICAgICAgIHRpbGUudG9nZ2xlRmxhZygpXG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgbm9NaW5lRmlyc3RDbGljayh0aWxlKVxuICAgICAgICAgICAgICAgIHRpbGUuY2xlYXIoKVxuICAgIH1cblxuICAgICRzY29wZS4kb24gJ1RpbGU6Q2xlYXInLCAoJGV2LCB0aWxlKSAtPlxuICAgICAgICBzYXZlKClcblxuXG5cbiAgICAkc2NvcGUuJG9uICdUaWxlOkZsYWcnLCAoJGV2LCB0aWxlKSAtPlxuICAgICAgICBzYXZlKClcblxuXG4gICAgd2luZG93LmxvZ1Njb3BlID0gKCkgLT5cbiAgICAgICAgd2luZG93LiRzY29wZSA9ICRzY29wZSIsbnVsbF0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9