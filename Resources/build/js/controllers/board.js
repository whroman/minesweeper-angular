angular.module("CtrlBoard",["ngSlider","CollectTiles","ModelSliders","ModelModals","ModelBoardInfo"]).controller("CtrlBoard",function($scope,storage,CollectTiles,ModelSliders,ModelModals,ModelBoardInfo){var noMineFirstClick,save,savedGame;return noMineFirstClick=function(tile){return 0===$scope.info.numOfClears&&tile.model.isMine===!0&&(tile.model.isMine=!1,$scope.tiles.randomSafeTile().model.isMine=!0,$scope.tiles.tallyMines()),tile},save=function(){return storage.set("tiles",$scope.tiles.all)},$scope.modals=ModelModals.set("Resources/templates/modals/",["instructions","newGame"]),$scope.sliders=ModelSliders.init(5,20,10),savedGame=storage.get("tiles"),$scope.tiles=savedGame?new CollectTiles(savedGame):new CollectTiles($scope.sliders.info.x.val,$scope.sliders.info.y.val,$scope.sliders.info.mines.val),save(),$scope.info=ModelBoardInfo,$scope.info.update($scope.tiles.all),$scope.ui={newGame:function(sizeX,sizeY,numOfMines){return $scope.tiles=new CollectTiles(sizeX,sizeY,numOfMines),$scope.info.update($scope.tiles.all),$scope.modals.reset()},tileClick:function(event,tile){var flagKeyWasPressed;return flagKeyWasPressed=event.shiftKey===!0||event.altKey===!0,flagKeyWasPressed?tile.toggleFlag():(noMineFirstClick(tile),tile.clear())}},$scope.$on("Tile:Clear",function($ev,tile){return $scope.tiles.clearNeighbors(tile),$scope.info.update($scope.tiles.all),save()}),$scope.$on("Tile:Flag",function($ev,tile){return $scope.info.update($scope.tiles.all),save()}),window.logScope=function(){return window.$scope=$scope}});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbnRyb2xsZXJzL2JvYXJkLmNvZmZlZSIsImNvbnRyb2xsZXJzL2JvYXJkLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJjb250cm9sbGVyIiwiJHNjb3BlIiwic3RvcmFnZSIsIkNvbGxlY3RUaWxlcyIsIk1vZGVsU2xpZGVycyIsIk1vZGVsTW9kYWxzIiwiTW9kZWxCb2FyZEluZm8iLCJub01pbmVGaXJzdENsaWNrIiwic2F2ZSIsInNhdmVkR2FtZSIsInRpbGUiLCJpbmZvIiwibnVtT2ZDbGVhcnMiLCJtb2RlbCIsImlzTWluZSIsInRpbGVzIiwicmFuZG9tU2FmZVRpbGUiLCJ0YWxseU1pbmVzIiwic2V0IiwiYWxsIiwibW9kYWxzIiwic2xpZGVycyIsImluaXQiLCJnZXQiLCJ4IiwidmFsIiwieSIsIm1pbmVzIiwidXBkYXRlIiwidWkiLCJuZXdHYW1lIiwic2l6ZVgiLCJzaXplWSIsIm51bU9mTWluZXMiLCJyZXNldCIsInRpbGVDbGljayIsImV2ZW50IiwiZmxhZ0tleVdhc1ByZXNzZWQiLCJzaGlmdEtleSIsImFsdEtleSIsInRvZ2dsZUZsYWciLCJjbGVhciIsIiRvbiIsIiRldiIsImNsZWFyTmVpZ2hib3JzIiwid2luZG93IiwibG9nU2NvcGUiXSwibWFwcGluZ3MiOiJBQUFBQSxRQUNDQyxPQUFPLGFBR0osV0FDQSxlQUNBLGVBQ0EsY0FDQSxtQkFHSEMsV0FBVyxZQUFhLFNBQ3JCQyxPQUNBQyxRQUNBQyxhQUNBQyxhQUNBQyxZQUNBQyxnQkFFQSxHQUFBQyxrQkFBQUMsS0FBQUMsU0MrQkYsT0QvQkVGLGtCQUFtQixTQUFDRyxNQU1oQixNQUw4QixLQUEzQlQsT0FBT1UsS0FBS0MsYUFBcUJGLEtBQUtHLE1BQU1DLFVBQVUsSUFDckRKLEtBQUtHLE1BQU1DLFFBQVMsRUFDcEJiLE9BQU9jLE1BQU1DLGlCQUFpQkgsTUFBTUMsUUFBUyxFQUM3Q2IsT0FBT2MsTUFBTUUsY0FFVlAsTUFFWEYsS0FBTyxXQ2hCUCxNRGlCSU4sU0FBUWdCLElBQUksUUFBU2pCLE9BQU9jLE1BQU1JLE1BRXRDbEIsT0FBT21CLE9BQVNmLFlBQVlhLElBQ3hCLCtCQUVJLGVBQ0EsWUFJUmpCLE9BQU9vQixRQUFVakIsYUFBYWtCLEtBQUssRUFBRyxHQUFJLElBRzFDYixVQUFZUCxRQUFRcUIsSUFBSSxTQUdwQnRCLE9BQU9jLE1BRFJOLFVBQ29CLEdBQUFOLGNBQWFNLFdBRWIsR0FBQU4sY0FDZkYsT0FBT29CLFFBQVFWLEtBQUthLEVBQUVDLElBQ3RCeEIsT0FBT29CLFFBQVFWLEtBQUtlLEVBQUVELElBQ3RCeEIsT0FBT29CLFFBQVFWLEtBQUtnQixNQUFNRixLQUdsQ2pCLE9BRUFQLE9BQU9VLEtBQU9MLGVBQ2RMLE9BQU9VLEtBQUtpQixPQUFPM0IsT0FBT2MsTUFBTUksS0FFaENsQixPQUFPNEIsSUFDSEMsUUFBUyxTQUFDQyxNQUFPQyxNQUFPQyxZQzlCMUIsTUQrQk1oQyxRQUFPYyxNQUFZLEdBQUFaLGNBQWE0QixNQUFPQyxNQUFPQyxZQUM5Q2hDLE9BQU9VLEtBQUtpQixPQUFPM0IsT0FBT2MsTUFBTUksS0FDaENsQixPQUFPbUIsT0FBT2MsU0FFbEJDLFVBQVcsU0FBQ0MsTUFBTzFCLE1BQ2YsR0FBQTJCLGtCQUtBLE9BTEFBLG1CQUNJRCxNQUFNRSxZQUFZLEdBQ2xCRixNQUFNRyxVQUFVLEVBR2pCRixrQkFDQzNCLEtBQUs4QixjQUVMakMsaUJBQWlCRyxNQUNqQkEsS0FBSytCLFdBR2pCeEMsT0FBT3lDLElBQUksYUFBYyxTQUFDQyxJQUFLakMsTUNoQy9CLE1EaUNJVCxRQUFPYyxNQUFNNkIsZUFBZWxDLE1BQzVCVCxPQUFPVSxLQUFLaUIsT0FBTzNCLE9BQU9jLE1BQU1JLEtBQ2hDWCxTQUdKUCxPQUFPeUMsSUFBSSxZQUFhLFNBQUNDLElBQUtqQyxNQ2xDOUIsTURtQ0lULFFBQU9VLEtBQUtpQixPQUFPM0IsT0FBT2MsTUFBTUksS0FDaENYLFNBRUpxQyxPQUFPQyxTQUFXLFdDbkNsQixNRG9DSUQsUUFBTzVDLE9BQVNBIiwiZmlsZSI6ImNvbnRyb2xsZXJzL2JvYXJkLmpzIiwic291cmNlc0NvbnRlbnQiOlsiYW5ndWxhclxuLm1vZHVsZSAnQ3RybEJvYXJkJyxcbiMgRGVwZW5kZW5jaWVzXG5bXG4gICAgJ25nU2xpZGVyJyxcbiAgICAnQ29sbGVjdFRpbGVzJyxcbiAgICAnTW9kZWxTbGlkZXJzJyxcbiAgICAnTW9kZWxNb2RhbHMnLFxuICAgICdNb2RlbEJvYXJkSW5mbydcbl1cblxuLmNvbnRyb2xsZXIgJ0N0cmxCb2FyZCcsIChcbiAgICAkc2NvcGUsXG4gICAgc3RvcmFnZSxcbiAgICBDb2xsZWN0VGlsZXMsXG4gICAgTW9kZWxTbGlkZXJzLFxuICAgIE1vZGVsTW9kYWxzLFxuICAgIE1vZGVsQm9hcmRJbmZvXG4pIC0+XG4gICAgbm9NaW5lRmlyc3RDbGljayA9ICh0aWxlKSAtPlxuICAgICAgICBpZiAkc2NvcGUuaW5mby5udW1PZkNsZWFycyBpcyAwIGFuZCB0aWxlLm1vZGVsLmlzTWluZSBpcyB0cnVlXG4gICAgICAgICAgICB0aWxlLm1vZGVsLmlzTWluZSA9IGZhbHNlXG4gICAgICAgICAgICAkc2NvcGUudGlsZXMucmFuZG9tU2FmZVRpbGUoKS5tb2RlbC5pc01pbmUgPSB0cnVlXG4gICAgICAgICAgICAkc2NvcGUudGlsZXMudGFsbHlNaW5lcygpXG5cbiAgICAgICAgcmV0dXJuIHRpbGVcblxuICAgIHNhdmUgPSAtPlxuICAgICAgICBzdG9yYWdlLnNldCAndGlsZXMnLCAkc2NvcGUudGlsZXMuYWxsXG5cbiAgICAkc2NvcGUubW9kYWxzID0gTW9kZWxNb2RhbHMuc2V0KFxuICAgICAgICAnUmVzb3VyY2VzL3RlbXBsYXRlcy9tb2RhbHMvJyxcbiAgICAgICAgW1xuICAgICAgICAgICAgJ2luc3RydWN0aW9ucycsXG4gICAgICAgICAgICAnbmV3R2FtZSdcbiAgICAgICAgXVxuICAgIClcblxuICAgICRzY29wZS5zbGlkZXJzID0gTW9kZWxTbGlkZXJzLmluaXQgNSwgMjAsIDEwXG5cbiAgICAjIExvYWQgb3IgQ3JlYXRlIGdhbWVcbiAgICBzYXZlZEdhbWUgPSBzdG9yYWdlLmdldCAndGlsZXMnXG5cbiAgICBpZiBzYXZlZEdhbWVcbiAgICAgICAgJHNjb3BlLnRpbGVzID0gbmV3IENvbGxlY3RUaWxlcyBzYXZlZEdhbWVcbiAgICBlbHNlXG4gICAgICAgICRzY29wZS50aWxlcyA9IG5ldyBDb2xsZWN0VGlsZXMoXG4gICAgICAgICAgICAkc2NvcGUuc2xpZGVycy5pbmZvLngudmFsLFxuICAgICAgICAgICAgJHNjb3BlLnNsaWRlcnMuaW5mby55LnZhbCxcbiAgICAgICAgICAgICRzY29wZS5zbGlkZXJzLmluZm8ubWluZXMudmFsXG4gICAgICAgIClcblxuICAgIHNhdmUoKVxuXG4gICAgJHNjb3BlLmluZm8gPSBNb2RlbEJvYXJkSW5mb1xuICAgICRzY29wZS5pbmZvLnVwZGF0ZSAkc2NvcGUudGlsZXMuYWxsXG5cbiAgICAkc2NvcGUudWkgPSB7XG4gICAgICAgIG5ld0dhbWU6IChzaXplWCwgc2l6ZVksIG51bU9mTWluZXMpIC0+XG4gICAgICAgICAgICAkc2NvcGUudGlsZXMgPSBuZXcgQ29sbGVjdFRpbGVzIHNpemVYLCBzaXplWSwgbnVtT2ZNaW5lc1xuICAgICAgICAgICAgJHNjb3BlLmluZm8udXBkYXRlICRzY29wZS50aWxlcy5hbGxcbiAgICAgICAgICAgICRzY29wZS5tb2RhbHMucmVzZXQoKVxuXG4gICAgICAgIHRpbGVDbGljazogKGV2ZW50LCB0aWxlKSAtPlxuICAgICAgICAgICAgZmxhZ0tleVdhc1ByZXNzZWQgPSAoXG4gICAgICAgICAgICAgICAgZXZlbnQuc2hpZnRLZXkgaXMgdHJ1ZSBvclxuICAgICAgICAgICAgICAgIGV2ZW50LmFsdEtleSBpcyB0cnVlXG4gICAgICAgICAgICApXG5cbiAgICAgICAgICAgIGlmIGZsYWdLZXlXYXNQcmVzc2VkXG4gICAgICAgICAgICAgICAgdGlsZS50b2dnbGVGbGFnKClcbiAgICAgICAgICAgIGVsc2VcbiAgICAgICAgICAgICAgICBub01pbmVGaXJzdENsaWNrKHRpbGUpXG4gICAgICAgICAgICAgICAgdGlsZS5jbGVhcigpXG4gICAgfVxuXG4gICAgJHNjb3BlLiRvbiAnVGlsZTpDbGVhcicsICgkZXYsIHRpbGUpIC0+XG4gICAgICAgICRzY29wZS50aWxlcy5jbGVhck5laWdoYm9ycyB0aWxlXG4gICAgICAgICRzY29wZS5pbmZvLnVwZGF0ZSAkc2NvcGUudGlsZXMuYWxsXG4gICAgICAgIHNhdmUoKVxuXG5cbiAgICAkc2NvcGUuJG9uICdUaWxlOkZsYWcnLCAoJGV2LCB0aWxlKSAtPlxuICAgICAgICAkc2NvcGUuaW5mby51cGRhdGUgJHNjb3BlLnRpbGVzLmFsbFxuICAgICAgICBzYXZlKClcblxuICAgIHdpbmRvdy5sb2dTY29wZSA9ICgpIC0+XG4gICAgICAgIHdpbmRvdy4kc2NvcGUgPSAkc2NvcGUiLG51bGxdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==