angular.module("CollectTiles",["ModelTile","angularLocalStorage"]).factory("CollectTiles",function(storage,ModelTile){var CollectTiles;return CollectTiles=function(){function CollectTiles(widthOrSavedGame,height,numOfMines){Array.isArray(widthOrSavedGame)?this.loadGame(widthOrSavedGame):this.newGame(widthOrSavedGame,height,numOfMines)}return CollectTiles.prototype.get=function(attrs){return this.getAll(attrs)[0]},CollectTiles.prototype.getAll=function(attrs){var key,matches,numOfAttrs,numOfMatchedAttrs,tile,val,_i,_j,_len,_len1,_ref,_ref1;if(matches=[],void 0===attrs)for(_ref=this.all,_i=0,_len=_ref.length;_len>_i;_i++)tile=_ref[_i],matches.push(tile);else for(_ref1=this.all,_j=0,_len1=_ref1.length;_len1>_j;_j++){tile=_ref1[_j],numOfAttrs=0,numOfMatchedAttrs=0;for(key in attrs)val=attrs[key],numOfAttrs++,tile.model[key]===val&&numOfMatchedAttrs++;numOfMatchedAttrs===numOfAttrs&&matches.push(tile)}return matches},CollectTiles.prototype.tallyMines=function(){var adjacentTile,neighborAttrs,neighborMine,neighborMines,neighborX,neighborY,tile,_i,_j,_len,_len1,_ref,_ref1;for(_ref=this.getAll(),_i=0,_len=_ref.length;_len>_i;_i++){for(tile=_ref[_i],neighborMines=0,_ref1=tile.adjacentTiles,_j=0,_len1=_ref1.length;_len1>_j;_j++)adjacentTile=_ref1[_j],neighborX=tile.model.x+adjacentTile[0],neighborY=tile.model.y+adjacentTile[1],neighborAttrs={isMine:!0,x:neighborX,y:neighborY},neighborMine=this.get(neighborAttrs),void 0!==neighborMine&&neighborMines++;tile.model.adjacentMines=neighborMines}return this},CollectTiles.prototype.randomSafeTile=function(){var findAttrs,randomIndex,safeTiles;return findAttrs={isClear:!1,isMine:!1},safeTiles=this.getAll(findAttrs),randomIndex=Math.floor(Math.random()*safeTiles.length),safeTiles[randomIndex]},CollectTiles.prototype.autoSelect=function(num){for(;num--;)this.randomSafeTile().clear();return this.all},CollectTiles.prototype.newGame=function(sizeX,sizeY,numOfMines){var attrs,mineNum,tile,x,y,_i,_j,_k,_ref,_ref1;for(this.reset(),y=_i=0,_ref=sizeY-1;_ref>=0?_ref>=_i:_i>=_ref;y=_ref>=0?++_i:--_i)for(x=_j=0,_ref1=sizeX-1;_ref1>=0?_ref1>=_j:_j>=_ref1;x=_ref1>=0?++_j:--_j)attrs={x:x,y:y},this.add(attrs);for(mineNum=_k=1;numOfMines>=1?numOfMines>=_k:_k>=numOfMines;mineNum=numOfMines>=1?++_k:--_k)tile=this.randomSafeTile(),tile.model.isMine=!0;return this.tallyMines()},CollectTiles.prototype.loadGame=function(savedTiles){var tile,_i,_len;for(this.reset(),_i=0,_len=savedTiles.length;_len>_i;_i++)tile=savedTiles[_i],this.add(tile.model);return this},CollectTiles.prototype.reset=function(){return this.all=[],this},CollectTiles.prototype.add=function(model){var tile;return tile=new ModelTile(model),this.all.push(tile),tile},CollectTiles.prototype.clearNeighbors=function(tile){var adjacentTile,neighbor,shouldClearNeighbor,shouldClearNeighbors,_i,_len,_ref;if(shouldClearNeighbors=0===tile.model.adjacentMines&&tile.model.isMine===!1)for(_ref=tile.adjacentTiles,_i=0,_len=_ref.length;_len>_i;_i++)adjacentTile=_ref[_i],neighbor=this.get({x:tile.model.x+adjacentTile[0],y:tile.model.y+adjacentTile[1]}),shouldClearNeighbor=neighbor&&neighbor.model.isClear===!1&&neighbor.model.isMine===!1,shouldClearNeighbor&&neighbor.clear();return this},CollectTiles}()});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbGxlY3Rpb25zL3RpbGVzLmNvZmZlZSIsImNvbGxlY3Rpb25zL3RpbGVzLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJmYWN0b3J5Iiwic3RvcmFnZSIsIk1vZGVsVGlsZSIsIkNvbGxlY3RUaWxlcyIsIndpZHRoT3JTYXZlZEdhbWUiLCJoZWlnaHQiLCJudW1PZk1pbmVzIiwiQXJyYXkiLCJpc0FycmF5IiwidGhpcyIsImxvYWRHYW1lIiwibmV3R2FtZSIsInByb3RvdHlwZSIsImdldCIsImF0dHJzIiwiZ2V0QWxsIiwia2V5IiwibWF0Y2hlcyIsIm51bU9mQXR0cnMiLCJudW1PZk1hdGNoZWRBdHRycyIsInRpbGUiLCJ2YWwiLCJfaSIsIl9qIiwiX2xlbiIsIl9sZW4xIiwiX3JlZiIsIl9yZWYxIiwiYWxsIiwibGVuZ3RoIiwicHVzaCIsIm1vZGVsIiwidGFsbHlNaW5lcyIsImFkamFjZW50VGlsZSIsIm5laWdoYm9yQXR0cnMiLCJuZWlnaGJvck1pbmUiLCJuZWlnaGJvck1pbmVzIiwibmVpZ2hib3JYIiwibmVpZ2hib3JZIiwiYWRqYWNlbnRUaWxlcyIsIngiLCJ5IiwiaXNNaW5lIiwiYWRqYWNlbnRNaW5lcyIsInJhbmRvbVNhZmVUaWxlIiwiZmluZEF0dHJzIiwicmFuZG9tSW5kZXgiLCJzYWZlVGlsZXMiLCJpc0NsZWFyIiwiTWF0aCIsImZsb29yIiwicmFuZG9tIiwiYXV0b1NlbGVjdCIsIm51bSIsImNsZWFyIiwic2l6ZVgiLCJzaXplWSIsIm1pbmVOdW0iLCJfayIsInJlc2V0IiwiYWRkIiwic2F2ZWRUaWxlcyIsImNsZWFyTmVpZ2hib3JzIiwibmVpZ2hib3IiLCJzaG91bGRDbGVhck5laWdoYm9yIiwic2hvdWxkQ2xlYXJOZWlnaGJvcnMiXSwibWFwcGluZ3MiOiJBQUFBQSxRQUNDQyxPQUFPLGdCQUVKLFlBQ0Esd0JBR0hDLFFBQVEsZUFBZ0IsU0FDckJDLFFBQ0FDLFdBRUEsR0FBQUMsYUNURixPRFNRQSxjQUFBLFdB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aEMsTUFBTVcsVUFBVSxFQUUxQnNCLHFCQUNDRCxTQUFTVCxPQzRCM0IsT0QxQk03QyxPQzZCRE4iLCJmaWxlIjoiY29sbGVjdGlvbnMvdGlsZXMuanMiLCJzb3VyY2VzQ29udGVudCI6WyJhbmd1bGFyXG4ubW9kdWxlICdDb2xsZWN0VGlsZXMnLCBbXG4jIERlcGVuZGVuY2llc1xuICAgICdNb2RlbFRpbGUnLFxuICAgICdhbmd1bGFyTG9jYWxTdG9yYWdlJ1xuXVxuXG4uZmFjdG9yeSAnQ29sbGVjdFRpbGVzJywgKFxuICAgIHN0b3JhZ2UsXG4gICAgTW9kZWxUaWxlXG4pIC0+XG4gICAgY2xhc3MgQ29sbGVjdFRpbGVzXG4gICAgICAgIGNvbnN0cnVjdG9yIDogKHdpZHRoT3JTYXZlZEdhbWUsIGhlaWdodCwgbnVtT2ZNaW5lcykgLT5cbiAgICAgICAgICAgIGlmIEFycmF5LmlzQXJyYXkgd2lkdGhPclNhdmVkR2FtZVxuICAgICAgICAgICAgICAgIEBsb2FkR2FtZSB3aWR0aE9yU2F2ZWRHYW1lXG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgQG5ld0dhbWUgd2lkdGhPclNhdmVkR2FtZSwgaGVpZ2h0LCBudW1PZk1pbmVzXG4gICAgICAgICAgICBAXG5cbiAgICAgICAgZ2V0IDogKGF0dHJzKSAtPlxuICAgICAgICAgICAgcmV0dXJuIEBnZXRBbGwoYXR0cnMpWzBdXG5cbiAgICAgICAgZ2V0QWxsIDogKGF0dHJzKSAtPlxuICAgICAgICAgICAgbWF0Y2hlcyA9IFtdXG4gICAgICAgICAgICBpZiBhdHRycyBpcyB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICBmb3IgdGlsZSBpbiBAYWxsXG4gICAgICAgICAgICAgICAgICAgIG1hdGNoZXMucHVzaCB0aWxlXG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgZm9yIHRpbGUgaW4gQGFsbFxuICAgICAgICAgICAgICAgICAgICBudW1PZkF0dHJzID0gMFxuICAgICAgICAgICAgICAgICAgICBudW1PZk1hdGNoZWRBdHRycyA9IDBcbiAgICAgICAgICAgICAgICAgICAgZm9yIGtleSwgdmFsIG9mIGF0dHJzXG4gICAgICAgICAgICAgICAgICAgICAgICBudW1PZkF0dHJzKytcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIHRpbGUubW9kZWxba2V5XSBpcyB2YWxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBudW1PZk1hdGNoZWRBdHRycysrXG5cbiAgICAgICAgICAgICAgICAgICAgaWYgbnVtT2ZNYXRjaGVkQXR0cnMgaXMgbnVtT2ZBdHRyc1xuICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hlcy5wdXNoIHRpbGVcblxuICAgICAgICAgICAgcmV0dXJuIG1hdGNoZXNcblxuICAgICAgICB0YWxseU1pbmVzIDogKCkgLT5cbiAgICAgICAgICAgIGZvciB0aWxlIGluIHRoaXMuZ2V0QWxsKClcbiAgICAgICAgICAgICAgICBuZWlnaGJvck1pbmVzID0gMFxuICAgICAgICAgICAgICAgIGZvciBhZGphY2VudFRpbGUgaW4gdGlsZS5hZGphY2VudFRpbGVzXG4gICAgICAgICAgICAgICAgICAgIG5laWdoYm9yWCA9IHRpbGUubW9kZWwueCArIGFkamFjZW50VGlsZVswXSBcbiAgICAgICAgICAgICAgICAgICAgbmVpZ2hib3JZID0gdGlsZS5tb2RlbC55ICsgYWRqYWNlbnRUaWxlWzFdXG4gICAgICAgICAgICAgICAgICAgIG5laWdoYm9yQXR0cnMgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpc01pbmUgIDogdHJ1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgeCAgICAgICA6IG5laWdoYm9yWFxuICAgICAgICAgICAgICAgICAgICAgICAgeSAgICAgICA6IG5laWdoYm9yWVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIG5laWdoYm9yTWluZSA9IHRoaXMuZ2V0KG5laWdoYm9yQXR0cnMpXG4gICAgICAgICAgICAgICAgICAgIGlmIG5laWdoYm9yTWluZSBpc250IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICAgICAgbmVpZ2hib3JNaW5lcysrXG4gICAgICAgICAgICAgICAgdGlsZS5tb2RlbC5hZGphY2VudE1pbmVzID0gbmVpZ2hib3JNaW5lc1xuXG4gICAgICAgICAgICBAXG5cbiAgICAgICAgcmFuZG9tU2FmZVRpbGUgOiAoKSAtPlxuICAgICAgICAgICAgZmluZEF0dHJzID1cbiAgICAgICAgICAgICAgICBpc0NsZWFyIDogZmFsc2VcbiAgICAgICAgICAgICAgICBpc01pbmUgIDogZmFsc2VcblxuICAgICAgICAgICAgc2FmZVRpbGVzID0gQGdldEFsbCBmaW5kQXR0cnNcbiAgICAgICAgICAgIHJhbmRvbUluZGV4ID0gTWF0aC5mbG9vciBNYXRoLnJhbmRvbSgpICogc2FmZVRpbGVzLmxlbmd0aFxuICAgICAgICAgICAgcmV0dXJuIHNhZmVUaWxlc1sgcmFuZG9tSW5kZXggXVxuXG4gICAgICAgIGF1dG9TZWxlY3QgOiAobnVtKSAtPlxuICAgICAgICAgICAgd2hpbGUgbnVtLS1cbiAgICAgICAgICAgICAgICBAcmFuZG9tU2FmZVRpbGUoKS5jbGVhcigpXG5cbiAgICAgICAgICAgIEBhbGxcblxuICAgICAgICBuZXdHYW1lIDogKHNpemVYLCBzaXplWSwgbnVtT2ZNaW5lcykgLT5cbiAgICAgICAgICAgIEByZXNldCgpXG4gICAgICAgICAgICBmb3IgeSBpbiBbMC4uc2l6ZVkgLSAxXVxuICAgICAgICAgICAgICAgIGZvciB4IGluIFswLi5zaXplWCAtIDFdXG4gICAgICAgICAgICAgICAgICAgIGF0dHJzID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgeCAgIDogeFxuICAgICAgICAgICAgICAgICAgICAgICAgeSAgIDogeVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIEBhZGQgYXR0cnNcblxuICAgICAgICAgICAgZm9yIG1pbmVOdW0gaW4gWzEuLm51bU9mTWluZXNdXG4gICAgICAgICAgICAgICAgdGlsZSA9IEByYW5kb21TYWZlVGlsZSgpXG4gICAgICAgICAgICAgICAgdGlsZS5tb2RlbC5pc01pbmUgPSB0cnVlXG5cbiAgICAgICAgICAgIEB0YWxseU1pbmVzKClcblxuICAgICAgICBsb2FkR2FtZSA6IChzYXZlZFRpbGVzKSAtPlxuICAgICAgICAgICAgQHJlc2V0KClcbiAgICAgICAgICAgIGZvciB0aWxlIGluIHNhdmVkVGlsZXNcbiAgICAgICAgICAgICAgICBAYWRkIHRpbGUubW9kZWxcbiAgICAgICAgICAgIEBcblxuICAgICAgICByZXNldCA6IC0+XG4gICAgICAgICAgICBAYWxsID0gW11cbiAgICAgICAgICAgIEBcblxuICAgICAgICBhZGQgOiAobW9kZWwpIC0+XG4gICAgICAgICAgICB0aWxlID0gbmV3IE1vZGVsVGlsZSBtb2RlbFxuICAgICAgICAgICAgQGFsbC5wdXNoIHRpbGVcbiAgICAgICAgICAgIHRpbGVcblxuICAgICAgICBjbGVhck5laWdoYm9ycyA6ICh0aWxlKSAtPlxuICAgICAgICAgICAgc2hvdWxkQ2xlYXJOZWlnaGJvcnMgPSB0aWxlLm1vZGVsLmFkamFjZW50TWluZXMgaXMgMCBhbmQgdGlsZS5tb2RlbC5pc01pbmUgaXMgZmFsc2VcbiAgICAgICAgICAgIGlmIHNob3VsZENsZWFyTmVpZ2hib3JzXG4gICAgICAgICAgICAgICAgZm9yIGFkamFjZW50VGlsZSBpbiB0aWxlLmFkamFjZW50VGlsZXNcbiAgICAgICAgICAgICAgICAgICAgbmVpZ2hib3IgPSBAZ2V0KFxuICAgICAgICAgICAgICAgICAgICAgICAgeCA6IHRpbGUubW9kZWwueCArIGFkamFjZW50VGlsZVswXVxuICAgICAgICAgICAgICAgICAgICAgICAgeSA6IHRpbGUubW9kZWwueSArIGFkamFjZW50VGlsZVsxXVxuICAgICAgICAgICAgICAgICAgICApXG5cbiAgICAgICAgICAgICAgICAgICAgc2hvdWxkQ2xlYXJOZWlnaGJvciA9IChcbiAgICAgICAgICAgICAgICAgICAgICAgIG5laWdoYm9yIGFuZFxuICAgICAgICAgICAgICAgICAgICAgICAgbmVpZ2hib3IubW9kZWwuaXNDbGVhciBpcyBmYWxzZSBhbmRcbiAgICAgICAgICAgICAgICAgICAgICAgIG5laWdoYm9yLm1vZGVsLmlzTWluZSBpcyBmYWxzZVxuICAgICAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgICAgIGlmIHNob3VsZENsZWFyTmVpZ2hib3JcbiAgICAgICAgICAgICAgICAgICAgICAgIG5laWdoYm9yLmNsZWFyKClcblxuICAgICAgICAgICAgQCIsbnVsbF0sInNvdXJjZVJvb3QiOiIvc291cmNlLyJ9