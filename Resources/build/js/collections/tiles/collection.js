angular.module("CollectTiles",["ModelTile","angularLocalStorage"]).factory("CollectTiles",function(storage,ModelTile){var add,autoSelect,clearNeighbors,exposeToModel,get,getAll,loadGame,newGame,randomSafeTile,tallyMines,tiles;return tiles=[],exposeToModel=function(){return{collection:{get:function(_this){return function(attrs){return _this.get(attrs)}}(this),getAll:function(_this){return function(attrs){return _this.getAll(attrs)}}(this)}}},get=function(attrs){return this.getAll(attrs)[0]},getAll=function(attrs){var key,matches,numOfAttrs,numOfMatchedAttrs,tile,val,_i,_j,_len,_len1,_ref,_ref1;if(matches=[],void 0===attrs)for(_ref=this.tiles,_i=0,_len=_ref.length;_len>_i;_i++)tile=_ref[_i],matches.push(tile);else for(_ref1=this.tiles,_j=0,_len1=_ref1.length;_len1>_j;_j++){tile=_ref1[_j],numOfAttrs=0,numOfMatchedAttrs=0;for(key in attrs)val=attrs[key],numOfAttrs++,tile.model[key]===val&&numOfMatchedAttrs++;numOfMatchedAttrs===numOfAttrs&&matches.push(tile)}return matches},tallyMines=function(){var adjacentTile,neighborAttrs,neighborMine,neighborMines,neighborX,neighborY,tile,_i,_j,_len,_len1,_ref,_ref1;for(_ref=this.getAll(),_i=0,_len=_ref.length;_len>_i;_i++){for(tile=_ref[_i],neighborMines=0,_ref1=tile.adjacentTiles,_j=0,_len1=_ref1.length;_len1>_j;_j++)adjacentTile=_ref1[_j],neighborX=tile.model.x+adjacentTile[0],neighborY=tile.model.y+adjacentTile[1],neighborAttrs={isMine:!0,x:neighborX,y:neighborY},neighborMine=this.get(neighborAttrs),void 0!==neighborMine&&neighborMines++;tile.model.adjacentMines=neighborMines}return this},randomSafeTile=function(){var findAttrs,randomTile,safeTiles;return findAttrs={isClear:!1,isMine:!1},safeTiles=this.getAll(findAttrs),randomTile=safeTiles[Math.floor(Math.random()*safeTiles.length)]},autoSelect=function(num){for(var tile;num--;)tile=this.randomSafeTile(),console.log(tile),tile.clear();return this.tiles},newGame=function(sizeX,sizeY,numOfMines){var attrs,mineNum,tile,x,y,_i,_j,_k,_ref,_ref1;for(this.tiles=[],y=_i=0,_ref=sizeY-1;_ref>=0?_ref>=_i:_i>=_ref;y=_ref>=0?++_i:--_i)for(x=_j=0,_ref1=sizeX-1;_ref1>=0?_ref1>=_j:_j>=_ref1;x=_ref1>=0?++_j:--_j)attrs={x:x,y:y},this.add(attrs);for(mineNum=_k=1;numOfMines>=1?numOfMines>=_k:_k>=numOfMines;mineNum=numOfMines>=1?++_k:--_k)tile=this.randomSafeTile(),tile.model.isMine=!0;return this.tallyMines(),this},loadGame=function(savedTiles){var tile,_i,_len;for(this.tiles=[],_i=0,_len=savedTiles.length;_len>_i;_i++)tile=savedTiles[_i],this.add(tile.model);return this},add=function(model){var tile;return tile=new ModelTile(model),this.tiles.push(tile)},clearNeighbors=function(tile){var adjacentTile,neighbor,_i,_len,_ref,_results;if(0===tile.model.adjacentMines&&tile.model.isMine===!1){for(console.log(this),_ref=tile.adjacentTiles,_results=[],_i=0,_len=_ref.length;_len>_i;_i++)adjacentTile=_ref[_i],neighbor=this.get({x:tile.model.x+adjacentTile[0],y:tile.model.y+adjacentTile[1]}),_results.push(void 0!==neighbor?neighbor.model.isClear===!1&&neighbor.model.isMine===!1?neighbor.clear():void 0:void 0);return _results}},{tiles:tiles,newGame:newGame,loadGame:loadGame,randomSafeTile:randomSafeTile,tallyMines:tallyMines,get:get,getAll:getAll,add:add,autoSelect:autoSelect,exposeToModel:exposeToModel,clearNeighbors:clearNeighbors}});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbGxlY3Rpb25zL3RpbGVzL2NvbGxlY3Rpb24uY29mZmVlIiwiY29sbGVjdGlvbnMvdGlsZXMvY29sbGVjdGlvbi5qcyJdLCJuYW1lcyI6WyJhbmd1bGFyIiwibW9kdWxlIiwiZmFjdG9yeSIsInN0b3JhZ2UiLCJNb2RlbFRpbGUiLCJhZGQiLCJhdXRvU2VsZWN0IiwiY2xlYXJOZWlnaGJvcnMiLCJleHBvc2VUb01vZGVsIiwiZ2V0IiwiZ2V0QWxsIiwibG9hZEdhbWUiLCJuZXdHYW1lIiwicmFuZG9tU2FmZVRpbGUiLCJ0YWxseU1pbmVzIiwidGlsZXMiLCJjb2xsZWN0aW9uIiwiX3RoaXMiLCJhdHRycyIsInRoaXMiLCJrZXkiLCJtYXRjaGVzIiwibnVtT2ZBdHRycyIsIm51bU9mTWF0Y2hlZEF0dHJzIiwidGlsZSIsInZhbCIsIl9pIiwiX2oiLCJfbGVuIiwiX2xlbjEiLCJfcmVmIiwiX3JlZjEiLCJsZW5ndGgiLCJwdXNoIiwibW9kZWwiLCJhZGphY2VudFRpbGUiLCJuZWlnaGJvckF0dHJzIiwibmVpZ2hib3JNaW5lIiwibmVpZ2hib3JNaW5lcyIsIm5laWdoYm9yWCIsIm5laWdoYm9yWSIsImFkamFjZW50VGlsZXMiLCJ4IiwieSIsImlzTWluZSIsImFkamFjZW50TWluZXMiLCJmaW5kQXR0cnMiLCJyYW5kb21UaWxlIiwic2FmZVRpbGVzIiwiaXNDbGVhciIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsIm51bSIsImNvbnNvbGUiLCJsb2ciLCJjbGVhciIsInNpemVYIiwic2l6ZVkiLCJudW1PZk1pbmVzIiwibWluZU51bSIsIl9rIiwic2F2ZWRUaWxlcyIsIm5laWdoYm9yIiwiX3Jlc3VsdHMiXSwibWFwcGluZ3MiOiJBQUFBQSxRQUNDQyxPQUFPLGdCQUVKLFlBQ0Esd0JBR0hDLFFBQVEsZUFBZ0IsU0FDckJDLFFBQ0FDLFdBR0EsR0FBQUMsS0FBQUMsV0FBQUMsZUFBQUMsY0FBQUMsSUFBQUMsT0FBQUMsU0FBQUMsUUFBQUMsZUFBQUMsV0FB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QSxTQUNkRSxlQUFrQkEsZUFDbEJDLFdBQWNBLFdBQ2RMLElBQWNBLElBQ2RDLE9BQWNBLE9BQ2RMLElBQWNBLElBQ2RDLFdBQWNBLFdBQ2RFLGNBQWlCQSxjQUNqQkQsZUFBZ0JBIiwiZmlsZSI6ImNvbGxlY3Rpb25zL3RpbGVzL2NvbGxlY3Rpb24uanMiLCJzb3VyY2VzQ29udGVudCI6WyJhbmd1bGFyXG4ubW9kdWxlICdDb2xsZWN0VGlsZXMnLCBbXG4jIERlcGVuZGVuY2llc1xuICAgICdNb2RlbFRpbGUnLFxuICAgICdhbmd1bGFyTG9jYWxTdG9yYWdlJ1xuXVxuXG4uZmFjdG9yeSAnQ29sbGVjdFRpbGVzJywgKFxuICAgIHN0b3JhZ2UsXG4gICAgTW9kZWxUaWxlXG4pIC0+XG5cbiAgICB0aWxlcyA9IFtdXG5cbiAgICBleHBvc2VUb01vZGVsID0gKCkgLT5cbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGNvbGxlY3Rpb24gIDoge1xuICAgICAgICAgICAgICAgIGdldCAgICAgOiAoYXR0cnMpID0+XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0KGF0dHJzKVxuICAgICAgICAgICAgICAgIGdldEFsbCAgOiAoYXR0cnMpID0+XG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZ2V0QWxsKGF0dHJzKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICBnZXQgPSAoYXR0cnMpIC0+XG4gICAgICAgIHJldHVybiB0aGlzLmdldEFsbChhdHRycylbMF1cblxuICAgIGdldEFsbCA9IChhdHRycykgLT5cbiAgICAgICAgbWF0Y2hlcyA9IFtdXG4gICAgICAgIGlmIGF0dHJzIGlzIHVuZGVmaW5lZFxuICAgICAgICAgICAgZm9yIHRpbGUgaW4gdGhpcy50aWxlc1xuICAgICAgICAgICAgICAgIG1hdGNoZXMucHVzaCh0aWxlKVxuICAgICAgICBlbHNlIFxuICAgICAgICAgICAgZm9yIHRpbGUgaW4gdGhpcy50aWxlc1xuICAgICAgICAgICAgICAgIG51bU9mQXR0cnMgPSAwXG4gICAgICAgICAgICAgICAgbnVtT2ZNYXRjaGVkQXR0cnMgPSAwXG4gICAgICAgICAgICAgICAgZm9yIGtleSwgdmFsIG9mIGF0dHJzXG4gICAgICAgICAgICAgICAgICAgIG51bU9mQXR0cnMrK1xuICAgICAgICAgICAgICAgICAgICBpZiB0aWxlLm1vZGVsW2tleV0gPT0gdmFsXG4gICAgICAgICAgICAgICAgICAgICAgICBudW1PZk1hdGNoZWRBdHRycysrXG5cbiAgICAgICAgICAgICAgICBpZiBudW1PZk1hdGNoZWRBdHRycyA9PSBudW1PZkF0dHJzXG4gICAgICAgICAgICAgICAgICAgIG1hdGNoZXMucHVzaCh0aWxlKVxuXG4gICAgICAgIHJldHVybiBtYXRjaGVzXG5cbiAgICB0YWxseU1pbmVzID0gKCkgLT5cbiAgICAgICAgZm9yIHRpbGUgaW4gdGhpcy5nZXRBbGwoKVxuICAgICAgICAgICAgbmVpZ2hib3JNaW5lcyA9IDBcbiAgICAgICAgICAgIGZvciBhZGphY2VudFRpbGUgaW4gdGlsZS5hZGphY2VudFRpbGVzXG4gICAgICAgICAgICAgICAgbmVpZ2hib3JYID0gdGlsZS5tb2RlbC54ICsgYWRqYWNlbnRUaWxlWzBdIFxuICAgICAgICAgICAgICAgIG5laWdoYm9yWSA9IHRpbGUubW9kZWwueSArIGFkamFjZW50VGlsZVsxXVxuICAgICAgICAgICAgICAgIG5laWdoYm9yQXR0cnMgPSB7XG4gICAgICAgICAgICAgICAgICAgIGlzTWluZSAgOiB0cnVlXG4gICAgICAgICAgICAgICAgICAgIHggICAgICAgOiBuZWlnaGJvclhcbiAgICAgICAgICAgICAgICAgICAgeSAgICAgICA6IG5laWdoYm9yWVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBuZWlnaGJvck1pbmUgPSB0aGlzLmdldChuZWlnaGJvckF0dHJzKVxuICAgICAgICAgICAgICAgIGlmIG5laWdoYm9yTWluZSBpc250IHVuZGVmaW5lZFxuICAgICAgICAgICAgICAgICAgICBuZWlnaGJvck1pbmVzKytcbiAgICAgICAgICAgIHRpbGUubW9kZWwuYWRqYWNlbnRNaW5lcyA9IG5laWdoYm9yTWluZXNcblxuICAgICAgICByZXR1cm4gdGhpc1xuXG4gICAgcmFuZG9tU2FmZVRpbGUgPSAoKSAtPlxuICAgICAgICBmaW5kQXR0cnMgPSB7XG4gICAgICAgICAgICBpc0NsZWFyIDogZmFsc2VcbiAgICAgICAgICAgIGlzTWluZSAgOiBmYWxzZVxuICAgICAgICB9XG4gICAgICAgIHNhZmVUaWxlcyA9IHRoaXMuZ2V0QWxsIGZpbmRBdHRyc1xuXG4gICAgICAgIHJhbmRvbVRpbGUgPSBzYWZlVGlsZXNbIE1hdGguZmxvb3IoIE1hdGgucmFuZG9tKCkgKiBzYWZlVGlsZXMubGVuZ3RoKSBdXG5cbiAgICAgICAgcmV0dXJuIHJhbmRvbVRpbGVcblxuXG4gICAgYXV0b1NlbGVjdCA9IChudW0pIC0+XG4gICAgICAgIHdoaWxlIG51bS0tXG4gICAgICAgICAgICB0aWxlID0gdGhpcy5yYW5kb21TYWZlVGlsZSgpXG4gICAgICAgICAgICBjb25zb2xlLmxvZyB0aWxlXG4gICAgICAgICAgICB0aWxlLmNsZWFyKClcblxuICAgICAgICByZXR1cm4gdGhpcy50aWxlc1xuXG4gICAgbmV3R2FtZSA9IChzaXplWCwgc2l6ZVksIG51bU9mTWluZXMpIC0+XG4gICAgICAgIHRoaXMudGlsZXMgPSBbXVxuICAgICAgICBmb3IgeSBpbiBbMC4uc2l6ZVkgLSAxXVxuICAgICAgICAgICAgZm9yIHggaW4gWzAuLnNpemVYIC0gMV1cbiAgICAgICAgICAgICAgICBhdHRycyA9IHtcbiAgICAgICAgICAgICAgICAgICAgeCAgIDogeFxuICAgICAgICAgICAgICAgICAgICB5ICAgOiB5XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHRoaXMuYWRkKGF0dHJzKVxuXG4gICAgICAgIGZvciBtaW5lTnVtIGluIFsxLi5udW1PZk1pbmVzXVxuICAgICAgICAgICAgdGlsZSA9IHRoaXMucmFuZG9tU2FmZVRpbGUoKVxuICAgICAgICAgICAgdGlsZS5tb2RlbC5pc01pbmUgPSB0cnVlXG4gICAgICAgIFxuICAgICAgICB0aGlzLnRhbGx5TWluZXMoKVxuXG4gICAgICAgIHJldHVybiB0aGlzXG5cbiAgICBsb2FkR2FtZSA9IChzYXZlZFRpbGVzKSAtPlxuICAgICAgICB0aGlzLnRpbGVzID0gW11cbiAgICAgICAgZm9yIHRpbGUgaW4gc2F2ZWRUaWxlc1xuICAgICAgICAgICAgdGhpcy5hZGQodGlsZS5tb2RlbClcblxuICAgICAgICByZXR1cm4gdGhpc1xuXG4gICAgYWRkID0gKG1vZGVsKSAtPlxuICAgICAgICB0aWxlID0gbmV3IE1vZGVsVGlsZSBtb2RlbFxuICAgICAgICBAdGlsZXMucHVzaCh0aWxlKVxuXG4gICAgY2xlYXJOZWlnaGJvcnMgPSAodGlsZSkgLT5cbiAgICAgICAgaWYgdGlsZS5tb2RlbC5hZGphY2VudE1pbmVzIGlzIDAgYW5kIHRpbGUubW9kZWwuaXNNaW5lIGlzIGZhbHNlXG4gICAgICAgICAgICBjb25zb2xlLmxvZyBAXG4gICAgICAgICAgICBmb3IgYWRqYWNlbnRUaWxlIGluIHRpbGUuYWRqYWNlbnRUaWxlc1xuICAgICAgICAgICAgICAgIG5laWdoYm9yID0gQGdldChcbiAgICAgICAgICAgICAgICAgICAgeCA6IHRpbGUubW9kZWwueCArIGFkamFjZW50VGlsZVswXVxuICAgICAgICAgICAgICAgICAgICB5IDogdGlsZS5tb2RlbC55ICsgYWRqYWNlbnRUaWxlWzFdXG4gICAgICAgICAgICAgICAgKVxuXG4gICAgICAgICAgICAgICAgaWYgbmVpZ2hib3IgaXNudCB1bmRlZmluZWRcbiAgICAgICAgICAgICAgICAgICAgaWYgbmVpZ2hib3IubW9kZWwuaXNDbGVhciBpcyBmYWxzZSBhbmQgbmVpZ2hib3IubW9kZWwuaXNNaW5lIGlzIGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICBuZWlnaGJvci5jbGVhcigpXG5cbiAgICByZXR1cm4ge1xuICAgICAgICB0aWxlcyAgICAgICA6IHRpbGVzXG4gICAgICAgIG5ld0dhbWUgICAgIDogbmV3R2FtZVxuICAgICAgICBsb2FkR2FtZSAgICA6IGxvYWRHYW1lXG4gICAgICAgIHJhbmRvbVNhZmVUaWxlICA6IHJhbmRvbVNhZmVUaWxlXG4gICAgICAgIHRhbGx5TWluZXMgIDogdGFsbHlNaW5lc1xuICAgICAgICBnZXQgICAgICAgICA6IGdldFxuICAgICAgICBnZXRBbGwgICAgICA6IGdldEFsbFxuICAgICAgICBhZGQgICAgICAgICA6IGFkZFxuICAgICAgICBhdXRvU2VsZWN0ICA6IGF1dG9TZWxlY3RcbiAgICAgICAgZXhwb3NlVG9Nb2RlbCAgOiBleHBvc2VUb01vZGVsXG4gICAgICAgIGNsZWFyTmVpZ2hib3JzOiBjbGVhck5laWdoYm9yc1xuICAgIH0iLG51bGxdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==